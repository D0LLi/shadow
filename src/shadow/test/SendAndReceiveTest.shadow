import shadow:io@Console;

class shadow:test@SendAndReceiveTest
{
	class ThreadTestRunner is CanRun
	{
		public run() => ()
		{
			(String message, Thread thread) = receive<String>();
			Console.printLine(Thread:Current->instance->name # " received: " # message # " from " # thread->name);
		}
	}

	public main(String[] args) => ()
	{
		Thread thread1 = spawn(ThreadTestRunner:());
		Thread thread2 = spawn(ThreadTestRunner:());

		send("aardvark", thread1);
		send("formulation", thread2);
	}
}